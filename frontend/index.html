<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Xan Nation</title>
  </head>
  <body class="text-space-100">
    <div id="app">
      <!-- Navigation Bar -->
      <nav class="aerogel-panel border-b border-space-700/20 p-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <h1 class="text-2xl font-bold gradient-heading">XAN NATION</h1>
            <button id="fleet-btn" class="px-3 py-1 void-surface hover:nebula-glow rounded text-sm transition-all duration-200">
              Fleet
            </button>
            <button id="trade-btn" class="px-3 py-1 void-surface hover:nebula-glow rounded text-sm transition-all duration-200">
              Trade
            </button>
            <button id="diplo-btn" class="px-3 py-1 void-surface hover:nebula-glow rounded text-sm transition-all duration-200">
              Diplomacy
            </button>
            <button id="buildings-btn" class="px-3 py-1 void-surface hover:nebula-glow rounded text-sm transition-all duration-200">
              Buildings
            </button>
          </div>
          <div class="flex items-center space-x-6"> <!-- Increased spacing for the new group -->
            <div id="game-status-indicators" class="flex items-center space-x-3 text-sm">
              <span id="game-tick-display" class="text-sky-300">Tick: 0</span>
              <span id="player-count-display" class="text-green-300">Active Factions: 0</span>
              <span id="next-tick-display" class="text-amber-300">Next Tick: --:--</span>
            </div>
            <div id="resources" class="flex space-x-3 text-sm">
              <span class="text-nebula-300">Credits: <span id="credits">0</span><span id="credit-income" class="text-xs text-plasma-300 ml-1"></span></span>
              <span class="text-space-300">Food: <span id="food">0</span></span>
              <span class="text-void-300">Ore: <span id="ore">0</span></span>
              <span class="text-plasma-300">Goods: <span id="goods">0</span></span>
              <span class="text-space-400">Fuel: <span id="fuel">0</span></span>
            </div>
            <div id="auth-section">
              <button id="login-btn" class="px-3 py-1 bg-gradient-to-r from-nebula-600 to-plasma-600 hover:from-nebula-500 hover:to-plasma-500 rounded text-sm transition-all duration-200">
                Login with Discord
              </button>
              <div id="user-info" class="hidden">
                <span id="username" class="text-nebula-300"></span>
                <button id="logout-btn" class="ml-2 px-2 py-1 bg-gradient-to-r from-space-700 to-space-800 hover:from-space-600 hover:to-space-700 rounded text-xs transition-all duration-200">
                  Logout
                </button>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <div class="flex h-screen">
        <!-- Main Game Canvas -->
        <div class="flex-1 relative">
          <canvas id="game-canvas" class="w-full h-full cursor-crosshair" style="background: radial-gradient(ellipse at center, #001433 0%, #000508 70%, #000000 100%);"></canvas>
          
          <!-- Overlay UI -->
          <div id="canvas-overlay" class="absolute inset-0 pointer-events-none">
            <!-- Tooltip -->
            <div id="tooltip" class="absolute text-sm hidden pointer-events-none z-10">
            </div>
            
            <!-- Context Menu -->
            <div id="context-menu" class="absolute shadow-lg hidden z-20 pointer-events-auto">
              <div class="py-1">
                <button class="w-full px-4 py-2 text-left hover:bg-gradient-to-r hover:from-nebula-800 hover:to-space-800 text-sm transition-all duration-200" data-action="view">
                  View System
                </button>
                <button class="w-full px-4 py-2 text-left hover:bg-gradient-to-r hover:from-plasma-800 hover:to-space-800 text-sm transition-all duration-200" data-action="fleet">
                  Send Fleet
                </button>
                <button class="w-full px-4 py-2 text-left hover:bg-gradient-to-r hover:from-void-800 hover:to-space-800 text-sm transition-all duration-200" data-action="trade">
                  Trade Route
                </button>
                <button class="w-full px-4 py-2 text-left hover:bg-gradient-to-r hover:from-emerald-800 hover:to-space-800 text-sm transition-all duration-200" data-action="colonize">
                  Colonize Planet
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Expanded View Container -->
      <div id="expanded-view-container" class="absolute top-16 left-0 p-4 bg-gray-800/90 text-white w-96 max-w-md h-[calc(100vh-4rem)] overflow-y-auto hidden z-10 backdrop-blur-sm rounded-r-lg shadow-xl">
          <!-- Content will be dynamically inserted here by uiController.js -->
      </div>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="fixed inset-0 hidden z-50">
      <div class="flex items-center justify-center h-full">
        <div id="modal-content" class="max-w-md w-full mx-4">
          <!-- Modal content will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>